{
  "name": "Site1",
  "release": "Not applicable for local development. Change to absolute path or a URL when deploying with Chillbox.",
  "contact": {
    "owner": "site1@example.test",
    "technical": "site1@example.test"
  },
  "server_name": "site1.example.test",
  "domain_list": [
    "site1.example.test"
  ],
  "env": [
    {
      "name": "REDIS_HOST",
      "value": "",
      "cmd": "printf '%s' \"$SLUGNAME-redis-$PROJECT_NAME_HASH\" | grep -o -E '^.{0,63}'"
    },
    {
      "name": "REDIS_URL_DEFAULT_USER",
      "value": "redis://$REDIS_HOST:38019?db=0"
    },
    {
      "name": "CHILL_STATIC_TRY_FILES_LAST_PARAM",
      "value": "@chillstatic"
    },
    {
      "name": "CHILL_STATIC_TRY_FILES_LAST_PARAM__chillbox",
      "value": "=404"
    },
    {
      "name": "CHILL_STATIC_PATH",
      "value": "/"
    },
    {
      "name": "CHILL_STATIC_SCHEME",
      "value": "http"
    },
    {
      "name": "CHILL_STATIC_HOST",
      "value": "$SLUGNAME-chillstatic-$PROJECT_NAME_HASH",
      "cmd": "printf '%s' '$SLUGNAME-chillstatic-$PROJECT_NAME_HASH' | grep -o -E '^.{0,63}'"
    },
    {
      "name": "CHILL_STATIC_HOST__chillbox",
      "value": "localhost"
    },
    {
      "name": "CHILL_STATIC_PORT",
      "value": "38011"
    },
    {
      "name": "CHILL_DYNAMIC_PATH",
      "value": "/dynamic/"
    },
    {
      "name": "CHILL_DYNAMIC_PORT",
      "value": "38012"
    },
    {
      "name": "CHILL_DYNAMIC_SCHEME",
      "value": "http"
    },
    {
      "name": "CHILL_DYNAMIC_HOST",
      "value": "$SLUGNAME-chilldynamic-$PROJECT_NAME_HASH",
      "cmd": "printf '%s' '$SLUGNAME-chilldynamic-$PROJECT_NAME_HASH' | grep -o -E '^.{0,63}'"
    },
    {
      "name": "CHILL_DYNAMIC_HOST__chillbox",
      "value": "localhost"
    },
    {
      "name": "API_PATH",
      "value": "/api/"
    },
    {
      "name": "API_PORT",
      "value": "38013"
    },
    {
      "name": "API_SCHEME",
      "value": "http"
    },
    {
      "name": "API_HOST",
      "value": "$SLUGNAME-api-$PROJECT_NAME_HASH",
      "cmd": "printf '%s' '$SLUGNAME-api-$PROJECT_NAME_HASH' | grep -o -E '^.{0,63}'"
    },
    {
      "name": "API_HOST__chillbox",
      "value": "localhost"
    },
    {
      "name": "IMMUTABLE_EXAMPLE_PORT",
      "value": "38014"
    },
    {
      "name": "IMMUTABLE_EXAMPLE_PATH",
      "value": "/immutable-example/v1/$IMMUTABLE_EXAMPLE_HASH/"
    },
    {
      "name": "IMMUTABLE_EXAMPLE_HOST",
      "value": "$SLUGNAME-immutable-example-$PROJECT_NAME_HASH",
      "cmd": "printf '%s' '$SLUGNAME-immutable-example-$PROJECT_NAME_HASH' | grep -o -E '^.{0,63}'"
    },
    {
      "name": "IMMUTABLE_EXAMPLE_HOST__chillbox",
      "value": "https://$IMMUTABLE_BUCKET_DOMAIN_NAME"
    },
    {
      "name": "IMMUTABLE_EXAMPLE_URL",
      "value": "http://$IMMUTABLE_EXAMPLE_HOST:$IMMUTABLE_EXAMPLE_PORT/"
    },
    {
      "name": "IMMUTABLE_EXAMPLE_URL__chillbox",
      "value": "https://$IMMUTABLE_BUCKET_DOMAIN_NAME/$SLUGNAME/immutable/immutable-example/$IMMUTABLE_EXAMPLE_HASH/"
    },
    {
      "name": "IMMUTABLE_EXAMPLE_HASH",
      "value": "810cdbfbd21fc5e08192641ead7e50c5",
      "cmd": "make --silent --directory=immutable-example --no-print-directory inspect.HASH"
    },
    {
      "name": "PROXY_CACHE_VALID__chillbox",
      "value": "1y"
    },
    {
      "name": "PROXY_CACHE_VALID",
      "value": "1s"
    }
  ],
  "crontab": [
    "13 5 * * 6 echo 'do something'"
  ],
  "redis": {
    "port": 38019,
    "maxmemory": "2mb",
    "maxmemory-policy": "allkeys-lfu"
  },
  "workers": [
    {
      "name": "worker",
      "lang": "python-worker",
      "handler": "worker",
      "secrets_config": "worker.secrets.cfg",
      "secrets_export_dockerfile": "secrets.Dockerfile",
      "niceness": 0,
      "count": 1,
      "run-cmd": "python /usr/local/src/app/src/site1_worker/script.py",
      "manifest": "MANIFEST",
      "environment": [
        {
          "name": "VIRTUAL_ENV_BIN",
          "value": "/usr/local/src/$SLUGNAME/worker/.venv/bin"
        }
      ]
    }
  ],
  "services": [
    {
      "name": "immutable-example",
      "lang": "immutable",
      "handler": "immutable-example",
      "environment": [
        {
          "name": "HOST",
          "value": "$IMMUTABLE_EXAMPLE_HOST"
        }
      ]
    },
    {
      "name": "api",
      "lang": "python",
      "handler": "api",
      "secrets_config": "api.secrets.cfg",
      "secrets_export_dockerfile": "secrets.Dockerfile",
      "niceness": 10,
      "worker_class": "gevent",
      "workers": 2,
      "max_requests": 50,
      "max_requests_jitter": 11,
      "log_level": "debug",
      "manifest": "MANIFEST",
      "environment": [
        {
          "name": "HOST",
          "value": "$API_HOST"
        },
        {
          "name": "PORT",
          "value": "$API_PORT"
        },
        {
          "name": "FLASK_APP",
          "value": "site1_api.app"
        },
        {
          "name": "FLASK_DEBUG",
          "value": "true"
        }
      ]
    },
    {
      "name": "chillstatic",
      "lang": "chill",
      "handler": "chill-static-example",
      "manifest": "MANIFEST",
      "environment": [
        {
          "name": "freeze",
          "value": "true"
        },
        {
          "name": "HOST",
          "value": "$CHILL_STATIC_HOST"
        },
        {
          "name": "CHILL_HOST",
          "value": "0.0.0.0"
        },
        {
          "name": "CHILL_PORT",
          "value": "$CHILL_STATIC_PORT"
        }
      ]
    },
    {
      "name": "chilldynamic",
      "lang": "chill",
      "handler": "chill-dynamic-example",
      "manifest": "MANIFEST",
      "environment": [
        {
          "name": "freeze",
          "value": "false"
        },
        {
          "name": "HOST",
          "value": "$CHILL_DYNAMIC_HOST"
        },
        {
          "name": "CHILL_HOST",
          "value": "0.0.0.0"
        },
        {
          "name": "CHILL_PORT",
          "value": "$CHILL_DYNAMIC_PORT"
        },
        {
          "name": "CHILL_PUBLIC_URL_PREFIX",
          "value": "$CHILL_DYNAMIC_PATH"
        }
      ]
    }
  ]
}
